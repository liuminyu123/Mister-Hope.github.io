(window.webpackJsonp=window.webpackJsonp||[]).push([[614],{1193:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"vconsole"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vconsole"}},[s._v("#")]),s._v(" vConsole "),a("MyBadge",{attrs:{text:"重要",type:"error"}})],1),s._v(" "),a("p",[s._v("在真机上，如果想要查看 "),a("code",[s._v("console")]),s._v(" API 输出的日志内容和额外的调试信息，需要在点击屏幕右上角的按钮打开的菜单里选择「打开调试」。此时小程序/小游戏会退出，重新打开后会右下角会出现一个 "),a("code",[s._v("vConsole")]),s._v(" 按钮。点击 "),a("code",[s._v("vConsole")]),s._v(" 按钮可以打开日志面板。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://res.wx.qq.com/wxdoc/dist/assets/img/vConsole-app.19b93c1e.jpg#width:350px",alt:"Vconsole"}})]),s._v(" "),a("h2",{attrs:{id:"vconsole-使用说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vconsole-使用说明"}},[s._v("#")]),s._v(" vConsole 使用说明")]),s._v(" "),a("p",[s._v("由于实现机制的限制，开发者调用 "),a("code",[s._v("console")]),s._v(" API 打印的日志内容，是转换成 JSON 字符串后传输给 "),a("code",[s._v("vConsole")]),s._v(" 的，导致 "),a("code",[s._v("vConsole")]),s._v(" 中展示的内容会有一些限制:")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("2.3.2 及以上版本，支持打印循环引用对象。循环引用的对象属性会显示引用路径，"),a("code",[s._v("@")]),s._v(" 表示对象本身。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" circular "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncircular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" promise"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncircular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" circular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncircular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x0 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" circular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("circular"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// \"{a: '<Circular: @>', c: {x0: '<Circular: @.x[0]>'}, x: [{promise: '<Promise>'}]}\"")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("2.3.1 及以上版本，支持展示所有类型的数据。基础库会对日志内容进行一次转换，经过转换的内容会使用"),a("code",[s._v("<>")]),s._v("包裹。如:")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<Function: func>")])]),s._v(" "),a("li",[a("code",[s._v("<Undefined>")])]),s._v(" "),a("li",[a("code",[s._v("<Infinity>")])]),s._v(" "),a("li",[a("code",[s._v("<Map: size=0>")])]),s._v(" "),a("li",[a("code",[s._v("<ArrayBuffer: byteLength=10>")])]),s._v(" "),a("li",[s._v("...")])])])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("尽量避免在非调试情景下打印结构过于复杂或内容过长的日志内容，因为这可能会带来额外耗时。")])]),s._v(" "),a("h2",{attrs:{id:"source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#source-map"}},[s._v("#")]),s._v(" Source Map")]),s._v(" "),a("blockquote",[a("p",[s._v("目前只在 iOS 6.7.2 及以上版本支持")])]),s._v(" "),a("p",[s._v("小程序/小游戏在打包时，会将所有 js 代码打包成一个文件，为了便于开发者在手机上调试时定位错误位置，小程序/小游戏提供了 Source Map 支持。")]),s._v(" "),a("p",[s._v("在开发者工具中开启 ES6 转 ES5、代码压缩时，会生成 Source Map 的 "),a("code",[s._v(".map")]),s._v(" 文件。开发版小程序中，基础库会使用代码包中的 "),a("code",[s._v(".map")]),s._v(" 文件，对 "),a("code",[s._v("vConsole")]),s._v(" 中展示的错误信息堆栈进行重新映射(只对开发者代码文件进行)。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://res.wx.qq.com/wxdoc/dist/assets/img/sourceMap.17b75816.jpg",alt:"Sourcemap"}})]),s._v(" "),a("p",[s._v("如果使用外部的编译脚本对源文件进行处理，只需将对应生成的 Source Map 文件放置在源文件的相同目录下")]),s._v(" "),a("p",[s._v("如:")]),s._v(" "),a("div",{staticClass:"language-md line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[s._v("pages/index.js\n\npages/index.js.map\n\napp.js\n\napp.js.map\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("开发者工具会读取、解析 Source Map 文件，并进行将其上传")]),s._v(" "),a("p",[s._v("后续可以在小程序后台的运营中心可以利用上传的 Source Map 文件进行错误分析")]),s._v(" "),a("ul",[a("li",[s._v("Source Map 文件不计入代码包大小计算。")]),s._v(" "),a("li",[s._v("开发版代码包中由于包含了 .map 文件，实际代码包大小会比体验版和正式版大。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);